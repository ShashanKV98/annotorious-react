{"version":3,"file":"annotorious-react.es11.js","sources":["../src/openseadragon/OpenSeadragonViewer.tsx"],"sourcesContent":["import { forwardRef, useContext, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport OpenSeadragon from 'openseadragon';\r\nimport { OpenSeadragonAnnotatorContext } from './OpenSeadragonAnnotator';\r\n\r\nexport interface OpenSeadragonViewerProps {\r\n\r\n  className?: string;\r\n\r\n  options: OpenSeadragon.Options;\r\n\r\n}\r\n\r\nexport const OpenSeadragonViewer = forwardRef<OpenSeadragon.Viewer, OpenSeadragonViewerProps>((props: OpenSeadragonViewerProps, ref) => {\r\n\r\n  const { className, options } = props;\r\n\r\n  const element = useRef<HTMLDivElement>(null);\r\n\r\n  const { viewer, setViewer } = useContext(OpenSeadragonAnnotatorContext);\r\n\r\n  useEffect(() => {    \r\n    if (element.current) {\r\n      const v = OpenSeadragon({...options, element: element.current });\r\n\r\n      // Checking for setViewer is just a convenience so we can\r\n      // use this component also without an OpenSeadragonAnnotator\r\n      if (setViewer)\r\n        setViewer(v);\r\n\r\n      return () => {\r\n        v.destroy();\r\n\r\n        if (setViewer) \r\n          setViewer(undefined);\r\n      }\r\n    }\r\n  }, [JSON.stringify(options)]);\r\n\r\n  useImperativeHandle(ref, () => viewer);\r\n\r\n  return (\r\n    <div className={className} ref={element} />\r\n  );\r\n\r\n});"],"names":["OpenSeadragonViewer","forwardRef","props","ref","className","options","element","useRef","viewer","setViewer","useContext","OpenSeadragonAnnotatorContext","useEffect","v","OpenSeadragon","useImperativeHandle","jsx"],"mappings":";;;;AAYO,MAAMA,IAAsBC,EAA2D,CAACC,GAAiCC,MAAQ;AAEhI,QAAA,EAAE,WAAAC,GAAW,SAAAC,EAAY,IAAAH,GAEzBI,IAAUC,EAAuB,IAAI,GAErC,EAAE,QAAAC,GAAQ,WAAAC,EAAU,IAAIC,EAAWC,CAA6B;AAEtE,SAAAC,EAAU,MAAM;AACd,QAAIN,EAAQ,SAAS;AACb,YAAAO,IAAIC,EAAc,EAAC,GAAGT,GAAS,SAASC,EAAQ,SAAS;AAI3D,aAAAG,KACFA,EAAUI,CAAC,GAEN,MAAM;AACX,QAAAA,EAAE,QAAQ,GAENJ,KACFA,EAAU,MAAS;AAAA,MAAA;AAAA,IAEzB;AAAA,KACC,CAAC,KAAK,UAAUJ,CAAO,CAAC,CAAC,GAERU,EAAAZ,GAAK,MAAMK,CAAM,GAGlC,gBAAAQ,EAAA,OAAA,EAAI,WAAAZ,GAAsB,KAAKE,EAAS,CAAA;AAG7C,CAAC;"}