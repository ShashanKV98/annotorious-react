{"version":3,"file":"annotorious-react.es3.js","sources":["../src/AnnotoriousPlugin.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { Annotation, Annotator } from '@annotorious/annotorious';\r\nimport { useAnnotator } from './Annotorious';\r\n\r\nexport interface AnnotoriousPluginProps <I extends Annotation, E extends unknown> {\r\n\r\n  plugin: (anno: Annotator<I, E>, opts?: Object) => ({ unmount?: () => void }) | void;\r\n\r\n  opts?: Object;\r\n\r\n}\r\n\r\nexport const AnnotoriousPlugin = <I extends Annotation = Annotation, E extends unknown = unknown>(props: AnnotoriousPluginProps<I, E>) => {\r\n  const { plugin, opts } = props;\r\n\r\n  const anno = useAnnotator<Annotator<I, E>>();\r\n\r\n  useEffect(() => {\r\n    if (anno) {\r\n      const p = plugin(anno, opts);\r\n\r\n      return () => {\r\n        if (p && 'unmount' in p)\r\n          p.unmount();\r\n      }\r\n    }\r\n  }, [anno]);\r\n\r\n  return null;\r\n\r\n}"],"names":["AnnotoriousPlugin","props","plugin","opts","anno","useAnnotator","useEffect","p"],"mappings":";;AAYa,MAAAA,IAAoB,CAAiEC,MAAwC;AAClI,QAAA,EAAE,QAAAC,GAAQ,MAAAC,EAAS,IAAAF,GAEnBG,IAAOC;AAEb,SAAAC,EAAU,MAAM;AACd,QAAIF,GAAM;AACF,YAAAG,IAAIL,EAAOE,GAAMD,CAAI;AAE3B,aAAO,MAAM;AACX,QAAII,KAAK,aAAaA,KACpBA,EAAE,QAAQ;AAAA,MAAA;AAAA,IAEhB;AAAA,EAAA,GACC,CAACH,CAAI,CAAC,GAEF;AAET;"}